

- 最开始我想的是手动上报埋点，但是这样我就需要在每个页面都加上埋点函数，并且在componentDidMount中手动上报，这个成本过高。

而且因为重重嵌套的组件，一不小心还会有重复上报的风险；

- 第二个点是，埋点上报需要用户的用户的id，但是这个请求是异步的，脚本的初始化在这之前。

我的设计是，在登录的时候就把用户信息（唯一的id，一般是一个名字的拼音）就存储到全局的redux中，然后每次业务上报的时候，都会检查id时候存在，并且从redux里面获取，从而确保用户身份的准确。