

### 照着简历问的面试，主要是聊天

#### 讲一下你在字节做的一些东西

讲了接受一些老项目，然后说自己是如何优化的，他问了一下，如何确保重构之后逻辑正确；

#### 通过什么方式通过监控来确保代码的正确性？

完全没想到，后面复盘的时候才意识到，应该说拉一个list，把功能点都记录一下，然后挨个测试；

#### 然后问它是怎么埋点的？

我就说了主动埋点，说了面包屑的路径；等等；

说了监听window.error等等的监听；

没说清楚的扯了一点上传机制，打包压缩啥啥啥的；

扯了一点performance API；

ps：
这里还瞎扯了一些“无感埋点”，不太懂，在那瞎扯；

#### 问为啥选jotai，而不是zustand或者redux

就说redux不好写，不好用；
zustand是通过存储在外部的方式，脱离了生命周期，尽管他有切片，以及部分响应部分更新的特性，但是仍然更适合中小型项目；
jotai，语法上更相似，好迁移一写；


- 补充说明：jotai有依赖追踪，在React这种组件级更新的框架中，可以做到很好的性能优化；

#### 继续问我，迁移的时候如何确保逻辑正确？

1. 灰度迁移，新的需求先用
2. 老项目，充分理解了再改

- 补充说明：先跟这个项目上的老同学对一下，

#### 看着简历，问我，一般怎么去考量设计一个组件？

这个不懂他在问什么；说了点通用组件和业务组件的区分（感觉太啰嗦了）

我就说了自己实现form的时候，实现了切换受控模式和非受控模式；

属性的话，说了ref还有props等等的；

其他的方面：考虑易用性和可拓展性
易用性简单来说就是用起来符合用户的直觉，比如要在一个input里面插icon，在React里面可能是在label属性中传children，在vue中就是用具名的slot；

可拓展性就是：提前架构好可能用到的钩子函数，然后在整个库中遇到的地方统一去调用；
比如全局theme主题；

#### 看着简历问，幽灵依赖

有些口齿和理解不清，就讲了npm在子仓库可以可以访问自己的package.json里面没有声明的依赖；

然后如果使用pnpm的话，他是使用软链接和符号链接相结合的方式，依赖的链接都存在 node_modules/.pnpm 
拥有依赖隔离；

这里感觉npm的幽灵依赖的产生没有讲清楚；

#### 看着简历，web worker， 问为什么用？

我说其实没这么大的需求，是我个人的技术决策，出于学习的需要；

因为js是单线程的，请求并发多了它会很卡；

就需要web worker开辟子线程；

然后它，通信比较复杂；等等；

#### 问我学mini-React学了些什么？

这个属于重灾区了
fiber架构，react element节点，jsx转译， Reconcile调度器，调度器的render（不可打断）和commit（可打断， 收集变化的组件和副作用）
都糅合在一起了；
然后说他，因为更新机制的原因，“即使 用memo和useCallback优化到极致，也不如vue3随便写写”

梳理一下：

学习到了React16引入的Fiber架构；

引入原因上：
浏览器中的js环境是单线程的，（它使用事件循环来来实现异步机制）；
所以他不能同时执行js脚本和渲染html；

在React15的架构中，因为React是组件级更新，它采用递归的方式遍历更新，如果遇到一些很深层的组件，那么js就会运行的很久，从而出现卡顿；
在React16以后，引入了Fiber架构，有如下更新：
- 引入了更加完备的`requestIdleCallback`polyfill，拥有类似于操作的系统的时间片轮转那样的机制；当浏览器（不使用浏览器原生api的原因是： 触发不稳定，以及兼容性问题）
- 将递归更新改为了可中断的循环的过程，（有点类似于generator， 但是React最后并没有使用generator）
- 他的更新可能会被拥有更高优先级的的更新取代掉；


#### 然后顺着我的话讲，问我vue有哪些优势？

- 转换上，React要通过babel把jsx转化成原生的js；vue使用模版语法，性能损耗更低一些；转化的更快一些，离原生js更近一些；（他说我的理解有问题；）
- 语法上：语法糖比较多，写起来更容易；
- 性能上：因为更新机制的原因，性能损耗更小；（扯了点虚拟dom， 但是他没深入问； ）


#### 换了个人，问React钩子为啥不让在if里面调用

设计层面：我说是因为React底层的事先顺序是通过链表，如果在if当中，

写法层面：钩子放在顶层，逻辑更清晰；

#### 接着问，如果出现了if，如何避免？

答了静态检查；

用eslint，在commit的时候做静态检查，然后问我有没有写过什么插件

没写过

然后我接着说，后面新项目应该都用biomejs

## 算法

给道简单题打发了：有效的括号；

## 反问

- 对这个岗位有什么期待？
- 我有哪些不足，能指点一下吗？

重视基础，让我讲我做过的东西；复盘的时候，要讲清楚，讲明白；
让我去想一下怎么把这些弄清楚；讲的不好；
要沟通到位；
然后说我模版的理解不太到位；

说我React没讲清楚，做的项目也没讲清楚；

- （心凉了，没敢问的） 实习类型，有没有转正机会，到岗时间；