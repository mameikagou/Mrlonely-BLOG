
### é¢å‘åˆ‡é¢ç¼–ç¨‹ AOP
å…è®¸åœ¨ä¸ä¿®æ”¹åŸæœ‰ä»£ç çš„æƒ…å†µä¸‹ï¼ŒåŠ¨æ€æ·»åŠ åŠŸèƒ½ï¼›

æ¯”å¦‚æ·»åŠ ä¸€äº›åŠŸèƒ½ï¼š
- æ—¥å¿—è®°å½•
- æ€§èƒ½ç›‘æ§
- äº‹åŠ¡ç®¡ç†

å¥½å¤„æ˜¯é™ä½è€¦åˆæ€§ï¼Œå¹¶ä¸”æ–¹ä¾¿ä»£ç å¤ç”¨ï¼›

### æ§åˆ¶åè½¬ IOC

ä½¿ç”¨å®¹å™¨æ¥ç®¡ç†å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸå’Œä¾èµ–å…³ç³»ä»¥åŠå¯¹è±¡çš„åˆ›å»ºï¼Œæ³¨å…¥ä¾èµ–ä¿¡æ¯ï¼Œå¼€å‘è€…ä¸éœ€è¦æ‰‹åŠ¨åˆ›å»ºå’Œç®¡ç†å¯¹è±¡ï¼Œæ¡†æ¶ä¼šè‡ªåŠ¨å¤„ç†è¿™äº›å·¥ä½œã€‚
æ¡†æ¶è´Ÿè´£è°ƒåº¦ä»£ç æ‰§è¡Œï¼Œå¼€å‘è€…åªéœ€è¦å®šä¹‰é€»è¾‘ï¼›

æ¯”å¦‚è¿™é‡Œç›´æ¥é€šè¿‡è£…é¥°å™¨æ¥æ³¨å…¥ç”¨æˆ·ä¿¡æ¯ï¼š
ä½ åªéœ€è¦å…³æ³¨é€»è¾‘ï¼Œè·å–ç”¨æˆ·çš„æ–¹æ³•æ¥è‡ªäºæ¡†æ¶ã€‚
```ts
@Get('profile')
getProfile(@UserInfo() user: User) { // ğŸ‘ˆ è¿™é‡Œé€šè¿‡è£…é¥°å™¨è‡ªåŠ¨æ³¨å…¥ç”¨æˆ·ä¿¡æ¯
  return user;
}
```


#### ä¾èµ–æ³¨å…¥ DIfg
ä¾èµ–æ³¨å…¥æ˜¯æ§åˆ¶åè½¬çš„ä¸€ç§å®ç°æ–¹å¼ï¼Œæ¡†æ¶è´Ÿè´£åˆ›å»ºå¯¹è±¡å¹¶æ³¨å…¥åˆ°éœ€è¦çš„åœ°æ–¹ï¼›

##### Nest
åœ¨ Nest ä¸­ï¼Œä¾èµ–æ³¨å…¥æ˜¯é€šè¿‡æ¨¡å—åŒ–çš„æ–¹å¼å®ç°çš„ï¼Œæ¯ä¸ªæ¨¡å—éƒ½å¯ä»¥å®šä¹‰è‡ªå·±çš„æä¾›è€…å’Œæ§åˆ¶å™¨ï¼ŒNest ä¼šè‡ªåŠ¨è§£æä¾èµ–å…³ç³»å¹¶æ³¨å…¥åˆ°éœ€è¦çš„åœ°æ–¹ï¼›

è£…é¥°å™¨é©±åŠ¨ï¼šé€šè¿‡ `@Injectable()`ã€`@Controller()` ç­‰è£…é¥°å™¨å£°æ˜å¯æ³¨å…¥çš„ç±»ã€‚

##### Java
ä¸»è¦é€šè¿‡æ³¨è§£å®ç°ï¼ŒSpring æ¡†æ¶æ˜¯ Java ä¸­æœ€å¸¸ç”¨çš„ä¾èµ–æ³¨å…¥æ¡†æ¶ï¼Œä½¿ç”¨ `@Autowired` æ³¨è§£æ¥è‡ªåŠ¨æ³¨å…¥ä¾èµ–ã€‚

è¿˜æœ‰xmlæˆ–è€…JavaConfigçš„æ–¹å¼æ¥é…ç½®ä¾èµ–æ³¨å…¥ã€‚

### DTOä»¥åŠVOæ–‡ä»¶

DTOï¼šData Transfer Objectï¼Œç”¨äºä¼ è¾“æ•°æ®ï¼Œé€šå¸¸ç”¨äºæ¥æ”¶å®¢æˆ·ç«¯è¯·æ±‚çš„æ•°æ®ï¼Œå¹¶å°†å…¶è½¬æ¢ä¸ºä¸šåŠ¡é€»è¾‘æ‰€éœ€çš„æ•°æ®æ ¼å¼ã€‚
VOï¼šValue Objectï¼Œç”¨äºè¡¨ç¤ºä¸šåŠ¡é€»è¾‘ä¸­çš„å€¼å¯¹è±¡ï¼Œé€šå¸¸ç”¨äºè¿”å›ç»™å®¢æˆ·ç«¯çš„æ•°æ®ã€‚
DTOå’ŒVOçš„åŒºåˆ«åœ¨äºï¼ŒDTOç”¨äºæ¥æ”¶è¯·æ±‚æ•°æ®ï¼ŒVOç”¨äºè¿”å›å“åº”æ•°æ®ã€‚

ä¸€èˆ¬æƒ…å†µï¼Œä¼šåˆ†åˆ«åˆ›å»ºDTOå’ŒVOï¼›
ä½†æ˜¯åœ¨ä¸€äº›æƒ…å†µä¸‹ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨`@Exclude`æ¥æ’é™¤ä¸€äº›å­—æ®µï¼Œä»è€Œç›´æ¥è¿”å›å®ä½“ç±»ã€‚
`@Expose`æ¥æŒ‡å®šä¸€äº›å­—æ®µï¼Œä»è€Œç›´æ¥è¿”å›å®ä½“ç±»ã€‚
`@Transform`æ¥è½¬æ¢ä¸€äº›å­—æ®µï¼Œä»è€Œç›´æ¥è¿”å›å®ä½“ç±»ã€‚
```ts
import { Exclude, Expose, Transform } from "class-transformer";

export class User {
    id: number;

    username: string;

    @Exclude()
    password: string;

    @Expose()
    get xxx(): string {
        return `${this.username} ${this.email}`;
    }

    @Transform(({value}) => 'é‚®ç®±æ˜¯ï¼š' + value)
    email: string;

    constructor(partial: Partial<User>) {
        Object.assign(this, partial);
    }
}

```

ä¸ºä»€ä¹ˆä¸ä½¿ç”¨VOå¯¹è±¡ï¼Ÿ

Nest æ–‡æ¡£é‡Œå¹¶æ²¡æœ‰æåˆ° vo å¯¹è±¡ï¼Œå› ä¸ºå®Œå…¨æ²¡æœ‰å¿…è¦ï¼Œå¯ä»¥ç›´æ¥ç”¨åºåˆ—åŒ–çš„ entityã€‚
entity é‡ŒåŠ ä¸Š @Exclude å¯ä»¥æ’é™¤æŸäº›å­—æ®µã€@Expose å¯ä»¥å¢åŠ ä¸€äº›æ´¾ç”Ÿå­—æ®µã€@Transform å¯ä»¥å¯¹å·²æœ‰å­—æ®µçš„åºåˆ—åŒ–ç»“æœåšä¿®æ”¹ã€‚
ç„¶ååœ¨ cotnroller ä¸ŠåŠ ä¸Š ClassSerializerInterceptor çš„ interceptorï¼Œè¿˜å¯ä»¥ç”¨ @SerializeOptions æ¥æ·»åŠ  optionsã€‚









